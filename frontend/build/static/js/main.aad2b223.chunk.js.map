{"version":3,"sources":["components/Footer.js","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacesPopup.js","components/ImagePopup.js","utils/Api.js","images/authorization-ok.svg","images/authorization-bad.svg","components/Login.js","components/Register.js","components/ProtectedRoute.js","components/InfoTooltip.js","utils/auth.js","components/App.js","reportWebVitals.js","index.js"],"names":["Footer","className","Header","loggedIn","email","handleSignOut","pathname","useLocation","text","linkRoute","to","onClick","CurrentUserContext","React","createContext","Card","card","onCardClick","onCardLike","onCardRemove","user","useContext","isOwn","owner","_id","isLiked","likes","some","i","src","link","alt","name","type","length","Main","props","avatar","onEditAvatar","onEditProfile","about","onAddPlace","cards","map","onCardDelete","PopupWithForm","isOpen","onClose","title","onSubmit","children","btnText","EditProfilePopup","onChangeUserInfo","useState","setName","description","setDescription","useEffect","e","preventDefault","id","minLength","maxLength","placeholder","onChange","target","value","required","EditAvatarPopup","avatarInput","useRef","current","ref","AddPlacesPopup","nameOfPlace","linkToPlace","ImagePopup","api","address","headers","this","_address","_headers","fetch","then","_checkResponse","console","log","method","body","JSON","stringify","url","cardId","dislikeCard","likeCard","res","ok","json","Promise","reject","status","Authorization","localStorage","getItem","authorization","Login","valueEmail","setValueEmail","valuePassword","setValuePassword","evt","password","Register","registration","ProtectedRoute","Component","component","InfoTooltip","message","iconPath","BASE_URL","checkResponse","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isPlacesPopupOpen","setIsPlacesPopupOpen","isTooltipOpen","setIsTooltipOpen","selectedCard","setSelectedCard","currentUser","setCurrentUser","setLoggedIn","setMessage","setEmail","history","useHistory","setCards","closeAllPopups","handleInfoTooltipOpen","handleInfoTooltipContent","getOriginsCards","catch","er","token","jwt","data","push","err","getUserInfo","userInfo","Provider","removeItem","path","setItem","updateHeaders","auth","Error","registrationOk","setTimeout","registrationWrong","exact","changeLikeCardStatus","newCard","state","c","removeCard","newCards","filter","el","postUserInfo","editUserAvatar","addNewCard","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"qNAQeA,MARf,WACE,OACE,wBAAQC,UAAU,SAAlB,SACE,mBAAGA,UAAU,oBAAb,uC,eC0BSC,MA1Bf,YAAqD,IAAnCC,EAAkC,EAAlCA,SAAUC,EAAwB,EAAxBA,MAAOC,EAAiB,EAAjBA,cACzBC,EAAaC,cAAbD,SACFE,EAAI,UAAmB,aAAbF,EAA0B,qEAAgB,kCACpDG,EAAS,UAAmB,aAAbH,EAA0B,WAAa,YAE5D,OACE,yBAAQL,UAAU,SAAlB,UACE,qBAAKA,UAAU,iBACf,qBAAKA,UAAU,eAAf,SACGE,EACC,qCACE,mBAAGF,UAAU,gBAAb,SAA8BG,IAC9B,cAAC,IAAD,CAAMH,UAAU,kBAAkBS,GAAG,GAAGC,QAASN,EAAjD,+CAKF,cAAC,IAAD,CAAMJ,UAAU,eAAeS,GAAID,EAAnC,SACGD,UClBCI,EAAqBC,IAAMC,gBC4C1BC,MA5Cf,YAA8D,IAA9CC,EAA6C,EAA7CA,KAAMC,EAAuC,EAAvCA,YAAYC,EAA2B,EAA3BA,WAAWC,EAAgB,EAAhBA,aAarCC,EAAOP,IAAMQ,WAAWT,GACxBU,EAAQN,EAAKO,QAAUH,EAAKI,IAC5BC,EAAUT,EAAKU,MAAMC,MAAK,SAACC,GAAD,OAAOA,EAAEJ,MAAQJ,EAAKI,OAEtD,OACE,sBAAKvB,UAAU,eAAf,UACE,qBACEA,UAAU,mBACV4B,IAAKb,EAAKc,KACVC,IAAKf,EAAKgB,KACVrB,QAtBN,WACEM,EAAYD,MAuBV,wBACEf,UACEqB,EACI,6BACA,oCAENX,QAtBN,WACEQ,EAAaH,MAuBX,sBAAKf,UAAU,qBAAf,UACE,oBAAIA,UAAU,oBAAd,SAAmCe,EAAKgB,OACxC,sBAAK/B,UAAU,yBAAf,UACE,wBAAQgC,KAAK,SAAShC,UAAS,8BAAyBwB,EAAU,6BAA8B,IAAMd,QA/B9G,WACEO,EAAWF,MA+BL,mBAAGf,UAAU,uBAAb,SAAqCe,EAAKU,MAAMQ,mBCoB3CC,MAxDf,SAAcC,GACZ,IAAMhB,EAAOP,IAAMQ,WAAWT,GAE9B,OACE,qCACE,0BAASX,UAAU,UAAnB,UACE,sBAAKA,UAAU,gBAAf,UACE,sBAAKA,UAAU,0BAAf,UACE,qBACE4B,IAAKT,EAAKiB,OACVpC,UAAU,kBACV8B,IAAI,0FAEN,wBACE9B,UAAU,8BACVU,QAASyB,EAAME,kBAGnB,sBAAKrC,UAAU,kBAAf,UACE,sBAAKA,UAAU,sBAAf,UACE,oBAAI+B,KAAK,QAAQ/B,UAAU,iBAA3B,SACGmB,EAAKY,OAER,wBACEC,KAAK,SACLhC,UAAU,uBACVU,QAASyB,EAAMG,mBAGnB,mBAAGP,KAAK,WAAW/B,UAAU,oBAA7B,SACGmB,EAAKoB,cAIZ,wBACEP,KAAK,SACLhC,UAAU,sBACVU,QAASyB,EAAMK,gBAInB,yBAASxC,UAAU,SAAnB,SACGmC,EAAMM,MAAMC,KAAI,SAAC3B,GAAD,OACf,cAAC,EAAD,CACEA,KAAMA,EACNC,YAAamB,EAAMnB,YACnBC,WAAYkB,EAAMlB,WAElBC,aAAciB,EAAMQ,cADf5B,EAAKQ,cCzBPqB,MA1Bf,SAAuBT,GACrB,OACE,qBACEnC,UAAS,sBAAiBmC,EAAMJ,KAAvB,YAA+BI,EAAMU,QAAU,gBAD1D,SAGE,sBAAK7C,UAAU,mBAAf,UACE,wBACEgC,KAAK,SACLhC,UAAU,eACVU,QAASyB,EAAMW,UAEjB,oBAAI9C,UAAU,eAAd,SAA8BmC,EAAMY,QACpC,uBAAMhB,KAAMI,EAAMJ,KAAM/B,UAAS,6BAAwBmC,EAAMJ,MAAQiB,SAAUb,EAAMa,SAAvF,UACGb,EAAMc,SACP,wBACEjB,KAAK,SACLhC,UAAU,oDAFZ,SAIGmC,EAAMe,mBCgDJC,MA9Df,YAAkE,IAAtCN,EAAqC,EAArCA,OAAQC,EAA6B,EAA7BA,QAASM,EAAoB,EAApBA,iBAC3C,EAAwBxC,IAAMyC,SAAS,IAAvC,mBAAOtB,EAAP,KAAauB,EAAb,KACA,EAAsC1C,IAAMyC,SAAS,IAArD,mBAAOE,EAAP,KAAoBC,EAApB,KACMrC,EAAOP,IAAMQ,WAAWT,GAoB9B,OALAC,IAAM6C,WAAU,WACdH,EAAQnC,EAAKY,MACbyB,EAAerC,EAAKoB,SACnB,CAACpB,EAAK0B,IAGP,eAAC,EAAD,CACEd,KAAK,eACLgB,MAAM,4HACNF,OAAQA,EACRC,QAASA,EACTI,QAAQ,yDACRF,SAjBJ,SAA8BU,GAC5BA,EAAEC,iBACFP,EAAiB,CAAErB,KAAMA,EAAMQ,MAAOgB,KAStC,UAQE,uBACEK,GAAG,cACH5B,KAAK,OACLD,KAAK,OACL8B,UAAU,IACVC,UAAU,KACVC,YAAY,qBACZ/D,UAAU,wCACVgE,SAnCN,SAAoBN,GAClBJ,EAAQI,EAAEO,OAAOC,QAmCbA,MAAOnC,GAAQ,IACfoC,UAAQ,IAEV,sBAAMnE,UAAU,wCAAhB,eACA,uBACE4D,GAAG,aACHM,MAAOX,GAAe,IACtBvB,KAAK,OACLD,KAAK,QACL8B,UAAU,IACVC,UAAU,MACVC,YAAY,yDACZ/D,UAAU,sCACVgE,SA7CN,SAA2BN,GACzBF,EAAeE,EAAEO,OAAOC,QA6CpBC,UAAQ,IAEV,sBAAMnE,UAAU,6CCpBPoE,MAtCf,YAA6D,IAAlCvB,EAAiC,EAAjCA,OAAQC,EAAyB,EAAzBA,QAAST,EAAgB,EAAhBA,aACpCgC,EAAczD,IAAM0D,SAc1B,OANA1D,IAAM6C,WAAU,WAEdY,EAAYE,QAAQL,MAAM,KAC1B,CAACrB,IAID,eAAC,EAAD,CACEd,KAAK,cACLgB,MAAM,wFACNF,OAAQA,EACRC,QAASA,EACTE,SAlBJ,SAA4BU,GAC1BA,EAAEC,iBACFtB,EAAa,CAAED,OAAQiC,EAAYE,QAAQL,SAiBzChB,QAAQ,yDANV,UAQE,uBACEU,GAAG,cACH5B,KAAK,MACLD,KAAK,OACLyC,IAAKH,EACLN,YAAY,yFACZ/D,UAAU,6CACVmE,UAAQ,IAEV,sBAAMnE,UAAU,6CCoBPyE,MArDf,YAA0D,IAAhC5B,EAA+B,EAA/BA,OAAQC,EAAuB,EAAvBA,QAASN,EAAc,EAAdA,WACnCkC,EAAc9D,IAAM0D,SACpBK,EAAc/D,IAAM0D,SAgB1B,OANA1D,IAAM6C,WAAU,WAEdiB,EAAYH,QAAQL,MAAO,GAC3BS,EAAYJ,QAAQL,MAAO,KAC3B,CAACrB,IAGD,eAAC,EAAD,CACEd,KAAK,YACLgB,MAAM,gEACNF,OAAQA,EACRC,QAASA,EACTE,SApBJ,SAAsBU,GACpBA,EAAEC,iBACFnB,EAAW,CACTT,KAAM2C,EAAYH,QAAQL,MAC1BrC,KAAM8C,EAAYJ,QAAQL,SAiB1BhB,QAAQ,yDANV,UAQE,uBACEU,GAAG,YACH5B,KAAK,OACLD,KAAK,OACLgC,YAAY,mDACZF,UAAU,IACVC,UAAU,KACV9D,UAAU,4CACVmE,UAAQ,EACRK,IAAKE,IAEP,sBAAM1E,UAAU,wCAChB,uBACE4D,GAAG,OACH5B,KAAK,MACLD,KAAK,OACLgC,YAAY,qGACZ/D,UAAU,2CACVmE,UAAQ,EACRK,IAAKG,IAEP,sBAAM3E,UAAU,sCCvCP4E,MAZf,YAAgD,IAA1B7D,EAAyB,EAAzBA,KAAM8B,EAAmB,EAAnBA,OAAQC,EAAW,EAAXA,QAClC,OACE,qBAAK9C,UAAS,iCAA4B6C,GAAU,gBAApD,SACE,sBAAK7C,UAAU,6BAAf,UACE,qBAAKA,UAAU,uBAAuB4B,IAAKb,EAAKc,KAAMC,IAAKf,EAAKgB,OAChE,mBAAG/B,UAAU,wBAAb,SAAsCe,EAAKgB,OAC3C,wBAAQ/B,UAAU,eAAeU,QAASoC,U,kBCkGnC+B,EARH,I,WA/FV,cAAmC,IAArBC,EAAoB,EAApBA,QAASC,EAAW,EAAXA,QAAW,oBAChCC,KAAKC,SAAWH,EAChBE,KAAKE,SAAWH,E,mDAGlB,WACE,OAAOI,MAAM,GAAD,OAAIH,KAAKC,SAAT,UAA2B,CACrCF,QAASC,KAAKE,WACbE,KAAKJ,KAAKK,kB,yBAGf,WACE,OAAOF,MAAM,GAAD,OAAIH,KAAKC,SAAT,aAA8B,CACxCF,QAASC,KAAKE,WACbE,KAAKJ,KAAKK,kB,0BAGf,SAAatD,EAAMQ,GAEjB,OADA+C,QAAQC,IAAIxD,GACLoD,MAAM,GAAD,OAAIH,KAAKC,SAAT,aAA8B,CACxCO,OAAQ,QACRT,QAASC,KAAKE,SACdO,KAAMC,KAAKC,UAAU,CACnB5D,KAAMA,EACNQ,MAAOA,MAER6C,KAAKJ,KAAKK,kB,wBAGf,SAAWtD,EAAMF,GACf,OAAOsD,MAAM,GAAD,OAAIH,KAAKC,SAAT,UAA2B,CACrCO,OAAQ,OACRT,QAASC,KAAKE,SACdO,KAAMC,KAAKC,UAAU,CACnB5D,KAAMA,EACNF,KAAMA,MAEPuD,KAAKJ,KAAKK,kB,4BAGf,SAAeO,GACb,OAAOT,MAAM,GAAD,OAAIH,KAAKC,SAAT,oBAAqC,CAC/CO,OAAQ,QACRT,QAASC,KAAKE,SACdO,KAAMC,KAAKC,UAAU,CACnBvD,OAAQwD,MAETR,KAAKJ,KAAKK,kB,wBAGf,SAAWQ,GACT,OAAOV,MAAM,GAAD,OAAIH,KAAKC,SAAT,kBAA2BY,GAAU,CAC/CL,OAAQ,SACRT,QAASC,KAAKE,WACbE,KAAKJ,KAAKK,kB,yBAGf,SAAYzB,GACV,OAAOuB,MAAM,GAAD,OAAIH,KAAKC,SAAT,kBAA2BrB,EAA3B,UAAuC,CACjD4B,OAAQ,SACRT,QAASC,KAAKE,WACbE,KAAKJ,KAAKK,kB,kCAGf,SAAqBzB,EAAIpC,GACvB,OAAIA,EACKwD,KAAKc,YAAYlC,GAEjBoB,KAAKe,SAASnC,K,sBAIzB,SAASA,GACP,OAAOuB,MAAM,GAAD,OAAIH,KAAKC,SAAT,kBAA2BrB,EAA3B,UAAuC,CACjD4B,OAAQ,MACRT,QAASC,KAAKE,WACbE,KAAKJ,KAAKK,kB,4BAGf,SAAeW,GACb,OAAKA,EAAIC,GAIFD,EAAIE,OAHFC,QAAQC,OAAR,+CAAyBJ,EAAIK,W,2BAMxC,WACErB,KAAKE,SAAW,CACd,eAAgB,mBAChBoB,cAAc,UAAD,OAAYC,aAAaC,QAAQ,a,KAKxC,CAAQ,CAClB1B,QAAS,iDACTC,QAAS,CACP0B,cAAc,UAAD,OAAYF,aAAaC,QAAQ,QAC9C,eAAgB,sBCpGL,MAA0B,6CCA1B,MAA0B,8CCuC1BE,MApCf,YAAiC,IAAjBD,EAAgB,EAAhBA,cAEZ,EAAoC7F,IAAMyC,SAAS,IAAnD,mBAAOsD,EAAP,KAAmBC,EAAnB,KACA,EAA0ChG,IAAMyC,SAAS,IAAzD,mBAAOwD,EAAP,KAAsBC,EAAtB,KAmBA,OACI,0BAAS9G,UAAU,eAAnB,UACI,oBAAIA,UAAU,sBAAd,sCACA,uBAAMgD,SAZd,SAAsB+D,GAClBA,EAAIpD,iBAIJ8C,EAAc,CAACtG,MAHDwG,EAGQK,SAFLH,KASiB7G,UAAU,qBAAxC,UACI,uBAAOkE,MAAOyC,EAAY3G,UAAU,sBAAsB+D,YAAY,QAC/DC,SAtBnB,SAA2B+C,GACvBH,EAAcG,EAAI9C,OAAOC,UAsBjB,uBAAOA,MAAO2C,EAAe7G,UAAU,sBAAsB+D,YAAY,uCAClEC,SApBnB,SAA8B+C,GAC1BD,EAAiBC,EAAI9C,OAAOC,UAoBpB,wBAAQlE,UAAU,uBAAlB,mDCODiH,MApCf,YAAmC,IAAhBC,EAAe,EAAfA,aAEf,EAAoCtG,IAAMyC,SAAS,IAAnD,mBAAOsD,EAAP,KAAmBC,EAAnB,KACA,EAA0ChG,IAAMyC,SAAS,IAAzD,mBAAOwD,EAAP,KAAsBC,EAAtB,KAkBA,OACI,0BAAS9G,UAAU,eAAnB,UACI,oBAAIA,UAAU,sBAAd,gFACA,uBAAMgD,SAXd,SAAsB+D,GAClBA,EAAIpD,iBAIJuD,EAAa,CAAC/G,MAHAwG,EAGMK,SAFHH,KAQiB7G,UAAU,qBAAxC,UACI,uBAAOkE,MAAOyC,EAAY3C,SApBtC,SAA2B+C,GACvBH,EAAcG,EAAI9C,OAAOC,QAmBsClC,KAAK,QAAQhC,UAAU,sBACvE+D,YAAY,UACnB,uBAAOG,MAAO2C,EAAe7C,SAlBzC,SAA8B+C,GAC1BD,EAAiBC,EAAI9C,OAAOC,QAiByClC,KAAK,WAC3DhC,UAAU,sBAAsB+D,YAAY,yCACnD,wBAAQ/D,UAAU,uBAAlB,6HAEJ,cAAC,IAAD,CAAMA,UAAU,sBAAsBS,GAAG,WAAzC,sK,kCCrBG0G,EAVQ,SAAC,GAAsC,IAA1BC,EAAyB,EAApCC,UAAyBlF,EAAW,iBACzD,OACI,cAAC,IAAD,UACK,kBACGA,EAAMjC,SAAW,cAACkH,EAAD,eAAejF,IAAY,cAAC,IAAD,CAAU1B,GAAG,iBCO1D6G,MAZf,YAAkD,IAA5BxE,EAA2B,EAA3BA,QAASD,EAAkB,EAAlBA,OAAQ0E,EAAU,EAAVA,QACnC,OACI,qBAAKvH,UAAS,oCAA+B6C,EAAS,eAAiB,IAAvE,SACI,sBAAK7C,UAAU,mBAAf,UACI,qBAAK4B,IAAK2F,EAAQC,SAAU1F,IAAI,6EAAsB9B,UAAU,uBAChE,mBAAGA,UAAU,oBAAb,SAAkCuH,EAAQhH,OAC1C,wBAAQyB,KAAK,SAAShC,UAAU,eAAeU,QAASoC,UCL3D2E,G,OAAW,kDAIlBC,EAAgB,SAAC1B,GACnB,OAAKA,EAAIC,GAGFD,EAAIE,OAFAC,QAAQC,OAAR,gDAA0BJ,EAAIK,UCmT9BsB,MA1Sf,WACE,MACE/G,IAAMyC,UAAS,GADjB,mBAAOuE,EAAP,KAA+BC,EAA/B,KAGA,EAAsDjH,IAAMyC,UAAS,GAArE,mBAAOyE,EAAP,KAA4BC,EAA5B,KAEA,EACEnH,IAAMyC,UAAS,GADjB,mBAAO2E,EAAP,KAA8BC,EAA9B,KAGA,EAAkDrH,IAAMyC,UAAS,GAAjE,mBAAO6E,EAAP,KAA0BC,EAA1B,KAEA,EAA0CvH,IAAMyC,UAAS,GAAzD,mBAAO+E,EAAP,KAAsBC,EAAtB,KAEA,EAAwCzH,IAAMyC,SAAS,IAAvD,mBAAOiF,EAAP,KAAqBC,EAArB,KAEA,EAAsC3H,IAAMyC,SAAS,IAArD,mBAAOmF,EAAP,KAAoBC,EAApB,KAEA,EAAgC7H,IAAMyC,UAAS,GAA/C,mBAAOnD,EAAP,KAAiBwI,EAAjB,KACA,GAA8B9H,IAAMyC,SAAS,CAAEmE,SAAU,GAAIjH,KAAM,KAAnE,qBAAOgH,GAAP,MAAgBoB,GAAhB,MACA,GAA0B/H,IAAMyC,SAAS,IAAzC,qBAAOlD,GAAP,MAAcyI,GAAd,MACMC,GAAUC,cAEhB,GAA0BlI,IAAMyC,SAAS,IAAzC,qBAAOZ,GAAP,MAAcsG,GAAd,MAyHA,SAASC,KACPjB,GAAuB,GACvBE,GAAyB,GACzBJ,GAA0B,GAC1BM,GAAqB,GACrBI,EAAgB,IAChBF,GAAiB,GAGnB,SAASY,KACPZ,GAAiB,GAGnB,SAASa,GAAT,GAAuD,IAAnB1B,EAAkB,EAAlBA,SAAUjH,EAAQ,EAARA,KAC5CoI,GAAW,CAAEnB,SAAUA,EAAUjH,KAAMA,IA+EzC,OApNAK,IAAM6C,WAAU,WACVvD,GACF2E,EACGsE,kBAEA/D,MAAK,SAAC3C,GACLsG,GAAStG,MAEV2G,OAAM,SAACC,GACN/D,QAAQC,IAAI8D,QAGjB,CAACnJ,IAEJU,IAAM6C,WAAU,WACd,IDduB6F,ECcjBC,EAAMhD,aAAaC,QAAQ,OAC7B+C,IDfmBD,ECiBPC,EDhBhBjE,QAAQC,IAAI+D,GACLnE,MAAM,GAAD,OAAIsC,EAAJ,aAAyB,CACjCjC,OAAQ,MACRT,QAAS,CACL,eAAgB,mBAChB,cAAgB,UAAhB,OAA2BuE,MAG9BlE,KAAKsC,GACLtC,MAAK,SAACoE,GAAD,OAAUA,MCQfpE,MAAK,SAACY,GACL0C,GAAY,GACZE,GAAS5C,EAAI7F,OACb0I,GAAQY,KAAK,QAEdL,OAAM,SAACM,GAAD,OAASpE,QAAQC,IAAImE,QAE/B,CAACb,KAEJjI,IAAM6C,WAAU,WACVvD,GACF2E,EACG8E,cACAvE,MAAK,SAACwE,GACLnB,EAAemB,MAEhBR,OAAM,SAACM,GACNpE,QAAQC,IAAImE,QAGjB,CAACxJ,IA8KF,eAACS,EAAmBkJ,SAApB,CAA6B3F,MAAOsE,EAApC,UACE,cAAC,EAAD,CAAQtI,SAAUA,EAAUC,MAAOA,GAAOC,cA9E9C,WACEsI,GAAY,GACZnC,aAAauD,WAAW,OACxBlB,GAAS,IACTC,GAAQY,KAAK,eA2EX,eAAC,IAAD,WACE,cAAC,IAAD,CAAOM,KAAK,WAAZ,SACE,cAAC,EAAD,CAAOtD,cAvCf,YAA6C,IAApBtG,EAAmB,EAAnBA,MAAO6G,EAAY,EAAZA,UDnMT,SAAC,GAAuB,IAAtB7G,EAAqB,EAArBA,MAAO6G,EAAc,EAAdA,SAC9B,OAAO7B,MAAM,GAAD,OAAIsC,EAAJ,WAAuB,CAC/BjC,OAAQ,OACRT,QAAS,CACL,OAAU,mBACV,eAAgB,oBAEpBU,KAAMC,KAAKC,UAAU,CAACxF,QAAO6G,eAC9B5B,KAAKsC,GACHtC,MAAK,SAACoE,GACH,GAAIA,EAAKF,MAGL,OAFA/C,aAAayD,QAAQ,MAAOR,EAAKF,OACjCzE,EAAIoF,gBACGT,EAAKF,UCuLxBY,CACa,CAAE/J,QAAO6G,aACnB5B,MAAK,SAACoE,GACL,IAAKA,EACH,MAAM,IAAIW,MAAM,+FAElB7E,QAAQC,IAAI,SACZqD,GAASzI,GACTuI,GAAY,GACZQ,GAAyB,CACvB1B,SAAU4C,EACV7J,KAAM,sIAER0I,KACAoB,WAAWxB,GAAQY,KAAM,IAAM,KAC/BY,WAAWrB,GAAgB,SAE5BI,OAAM,SAACM,GACNR,GAAyB,CACvB1B,SAAU8C,EACV/J,KAAM,wMAER0I,KACAoB,WAAWrB,GAAgB,MAC3B1D,QAAQC,IAAImE,WAgBZ,cAAC,IAAD,CAAOK,KAAK,WAAZ,SACE,cAAC,EAAD,CAAU7C,aA7ElB,aD3KsB,SAAC/G,EAAO6G,GAC5B,OAAO7B,MAAM,GAAD,OAAIsC,EAAJ,WAAuB,CAC/BjC,OAAQ,OACRT,QAAS,CACL,OAAU,mBACV,eAAgB,oBAEpBU,KAAMC,KAAKC,UAAU,CAACxF,QAAO6G,gBCqKjCkD,CADyC,EAAnB/J,MAAmB,EAAZ6G,UAG1B5B,MAAK,SAACY,GACc,MAAfA,EAAIK,QAAiC,MAAfL,EAAIK,SAC5Bf,QAAQC,IAAI,aACZ2D,GAAyB,CACvB1B,SAAU4C,EACV7J,KAAM,0KAER0I,KACAoB,WAAWxB,GAAQY,KAAM,IAAM,YAC/BY,WAAWrB,GAAgB,OAEV,MAAfhD,EAAIK,SACNf,QAAQC,IAAI,yKACZ2D,GAAyB,CACvB1B,SAAU8C,EACV/J,KAAM,0KAER0I,KACAoB,WAAWrB,GAAgB,UAG9BI,OAAM,SAACM,GACNR,GAAyB,CACvB1B,SAAU8C,EACV/J,KAAM,wMAER0I,KACAoB,WAAWrB,GAAgB,MAC3B1D,QAAQC,IAAImE,WAgDZ,cAAC,EAAD,CACEa,OAAK,EACLR,KAAK,IACL1C,UAAWnF,EACXI,cAvHR,WACEuF,GAA0B,IAuHpBrF,WAhHR,WACEuF,GAAuB,IAgHjB1F,aArHR,WACE4F,GAAyB,IAqHnBjH,YAtBR,SAAyBD,GACvBwH,EAAgBxH,GAChBoH,GAAqB,IAqBflH,WA7LR,SAAwBF,GACtB,IAAMS,EAAUT,EAAKU,MAAMC,MAAK,SAACC,GAAD,OAAOA,IAAM6G,EAAYjH,OACzD+D,QAAQC,IAAI/D,GACZqD,EACG2F,qBAAqBzJ,EAAKQ,IAAKC,GAC/B4D,MAAK,SAACqF,GACL1B,IAAS,SAAC2B,GAAD,OACPA,EAAMhI,KAAI,SAACiI,GAAD,OAAQA,EAAEpJ,MAAQR,EAAKQ,IAAMkJ,EAAUE,WAGpDvB,OAAM,SAACC,GACN/D,QAAQC,IAAI8D,MAEhBxE,EAAI8E,cAAcvE,MAAK,SAACjE,GACtBmE,QAAQC,IAAIpE,OAgLRsB,MAAOA,GACPE,aArJR,SAA0B5B,GACxB8D,EACG+F,WAAW7J,EAAKQ,KAChB6D,MAAK,WACJ,IAAMyF,EAAWpI,GAAMqI,QAAO,SAACC,GAAD,OAAQA,IAAOhK,KAC7CgI,GAAS8B,MAEVzB,OAAM,SAACC,GACN/D,QAAQC,IAAI8D,OA8IVnJ,SAAUA,IAGZ,cAAC,IAAD,CAAO6J,KAAK,IAAZ,SACG7J,EAAW,cAAC,IAAD,CAAUO,GAAG,UAAa,cAAC,IAAD,CAAUA,GAAG,kBAGvD,cAAC,EAAD,IACA,cAAC,EAAD,CACEoC,OAAQ+E,EACR9E,QAASkG,GACT5F,iBAzLN,YAA0C,IAAhBrB,EAAe,EAAfA,KAAMQ,EAAS,EAATA,MAC9BsC,EACGmG,aAAajJ,EAAMQ,GACnB6C,MAAK,SAACoE,GACLf,EAAee,GACfR,QAEDI,OAAM,SAACC,GACN/D,QAAQC,IAAI8D,SAmLd,cAAC,EAAD,CACExG,OAAQmF,EACRlF,QAASkG,GACT3G,aAlLN,YAAuC,IAAXD,EAAU,EAAVA,OAC1ByC,EACGoG,eAAe7I,GACfgD,MAAK,SAACoE,GACLf,EAAee,GACfR,QAEDI,OAAM,SAACC,GACN/D,QAAQC,IAAI8D,SA6Kd,cAAC,EAAD,CACExG,OAAQiF,EACRhF,QAASkG,GACTxG,WAhKN,YAA+C,IAAfT,EAAc,EAAdA,KAAMF,EAAQ,EAARA,KACpCgD,EACGqG,WAAWnJ,EAAMF,GACjBuD,MAAK,SAACoE,GACLT,GAAS,CAACS,GAAF,mBAAW/G,MACnBuG,QAEDI,OAAM,SAACM,GACNpE,QAAQC,IAAImE,SA6Jd,cAAC,EAAD,CACE3I,KAAMuH,EACNzF,OAAQqF,EACRpF,QAASkG,KAEX,cAAC,EAAD,CACEnG,OAAQuF,EACRtF,QAASkG,GACTzB,QAASA,SC3SF4D,EAZS,SAAAC,GAClBA,GAAeA,aAAuBC,UACxC,8BAAqBjG,MAAK,YAAkD,IAA/CkG,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCAdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,IAAD,UACE,cAAC,EAAD,QAGJC,SAASC,eAAe,SAM1BZ,M","file":"static/js/main.aad2b223.chunk.js","sourcesContent":["function Footer() {\n  return (\n    <footer className=\"footer\">\n      <p className=\"footer__container\">&copy; 2020 Mesto Russia</p>\n    </footer>\n  );\n}\n\nexport default Footer;\n","import { Link, useLocation } from \"react-router-dom\";\nimport React from \"react\";\n\nfunction Header({ loggedIn, email, handleSignOut }) {\n  const { pathname } = useLocation();\n  const text = `${pathname === \"/sign-in\" ? \"Регистрация\" : \"Войти\"}`;\n  const linkRoute = `${pathname === \"/sign-in\" ? \"/sign-up\" : \"/sign-in\"}`;\n\n  return (\n    <header className=\"header\">\n      <div className=\"header__logo\"></div>\n      <div className=\"header__wrap\">\n        {loggedIn ? (\n          <>\n            <p className=\"header__email\">{email}</p>\n            <Link className=\"header__signout\" to=\"\" onClick={handleSignOut}>\n              Выйти\n            </Link>\n          </>\n        ) : (\n          <Link className=\"header__link\" to={linkRoute}>\n            {text}\n          </Link>\n        )}\n      </div>\n    </header>\n  );\n}\n\nexport default Header;\n","\nimport React from \"react\"\n\nexport const  CurrentUserContext = React.createContext()\n\n\n","import React from \"react\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nfunction Card({ card, onCardClick,onCardLike,onCardRemove }) {\n  function handleClick() {\n    onCardClick(card);\n  }\n\n  function handleLikeClick(){\n    onCardLike(card)\n  }\n\n  function handleCardRemove(){\n    onCardRemove(card)\n  }\n\n  const user = React.useContext(CurrentUserContext);\n  const isOwn = card.owner === user._id;\n  const isLiked = card.likes.some((i) => i._id === user._id);\n\n  return (\n    <div className=\"places__item\">\n      <img\n        className=\"places__item-img\"\n        src={card.link}\n        alt={card.name}\n        onClick={handleClick}\n      />\n      <button\n        className={\n          isOwn\n            ? \"places__item-delete-button\"\n            : \"places__item-delete-button_hidden\"\n        }\n        onClick={handleCardRemove}\n      ></button>\n      <div className=\"places__item-group\">\n        <h2 className=\"places__item-name\">{card.name}</h2>\n        <div className=\"places__like-container\">\n          <button type=\"button\" className={`places__like-button ${isLiked ? 'places__like-button_active': ''}`} onClick={handleLikeClick}></button>\n          <p className=\"places__like-counter\">{card.likes.length}</p>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Card;\n","import React from \"react\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport Card from \"./Card.js\";\n\nfunction Main(props) {\n  const user = React.useContext(CurrentUserContext);\n\n  return (\n    <>\n      <section className=\"profile\">\n        <div className=\"profile__info\">\n          <div className=\"profile__info-container\">\n            <img\n              src={user.avatar}\n              className=\"profile__avatar\"\n              alt=\"Аватарка автора\"\n            />\n            <button\n              className=\"profile__info-avatar-button\"\n              onClick={props.onEditAvatar}\n            ></button>\n          </div>\n          <div className=\"profile__author\">\n            <div className=\"profile__author-add\">\n              <h1 name=\"title\" className=\"profile__title\">\n                {user.name}\n              </h1>\n              <button\n                type=\"button\"\n                className=\"profile__edit-button\"\n                onClick={props.onEditProfile}\n              ></button>\n            </div>\n            <p name=\"subtitle\" className=\"profile__subtitle\">\n              {user.about}\n            </p>\n          </div>\n        </div>\n        <button\n          type=\"button\"\n          className=\"profile__add-button\"\n          onClick={props.onAddPlace}\n        ></button>\n      </section>\n\n      <section className=\"places\">\n        {props.cards.map((card) => (\n          <Card\n            card={card}\n            onCardClick={props.onCardClick}\n            onCardLike={props.onCardLike}\n            key={card._id}\n            onCardRemove={props.onCardDelete}\n          />\n        ))}\n      </section>\n    </>\n  );\n}\n\nexport default Main;\n","function PopupWithForm(props) {\n  return (\n    <div\n      className={`popup popup_${props.name} ${props.isOpen && \"popup_active\"}`}\n    >\n      <div className=\"popup__container\">\n        <button\n          type=\"button\"\n          className=\"popup__close\"\n          onClick={props.onClose}\n        ></button>\n        <h2 className=\"popup__title\">{props.title}</h2>\n        <form name={props.name} className={`popup__form popup__${props.name}`} onSubmit={props.onSubmit}>\n          {props.children}\n          <button\n            type=\"submit\"\n            className=\"popup__button-save popup__button-save-edit-avatar\"\n          >\n            {props.btnText}\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n}\n\nexport default PopupWithForm;\n","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\n\nfunction EditProfilePopup({ isOpen, onClose, onChangeUserInfo }) {\n  const [name, setName] = React.useState(\"\");\n  const [description, setDescription] = React.useState(\"\");\n  const user = React.useContext(CurrentUserContext);\n\n  function updateName(e) {\n    setName(e.target.value);\n  }\n\n  function updateDescription(e) {\n    setDescription(e.target.value);\n  }\n\n  function handleSubmitUserInfo(e) {\n    e.preventDefault();\n    onChangeUserInfo({ name: name, about: description });\n  }\n\n  React.useEffect(() => {\n    setName(user.name);\n    setDescription(user.about);\n  }, [user,isOpen]);\n\n  return (\n    <PopupWithForm\n      name=\"edit-profile\"\n      title=\"Редактировать профиль\"\n      isOpen={isOpen}\n      onClose={onClose}\n      btnText=\"Сохранить\"\n      onSubmit={handleSubmitUserInfo}\n    >\n      <input\n        id=\"name-author\"\n        type=\"text\"\n        name=\"name\"\n        minLength=\"2\"\n        maxLength=\"40\"\n        placeholder=\"Имя\"\n        className=\" popup__input popup__input_type_name \"\n        onChange={updateName}\n        value={name || \" \"}\n        required\n      />\n      <span className=\" name-author-error popup__input-error\"> </span>\n      <input\n        id=\"job-author\"\n        value={description || \" \"}\n        type=\"text\"\n        name=\"about\"\n        minLength=\"2\"\n        maxLength=\"200\"\n        placeholder=\"Призвание\"\n        className=\" popup__input popup__input_type_job\"\n        onChange={updateDescription}\n        required\n      />\n      <span className=\" job-author-error popup__input-error\"></span>\n    </PopupWithForm>\n  );\n}\n\nexport default EditProfilePopup;\n","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nfunction EditAvatarPopup({ isOpen, onClose, onEditAvatar }) {\n  const avatarInput = React.useRef();\n\n  function handleAvatarSubmit(e) {\n    e.preventDefault();\n    onEditAvatar({ avatar: avatarInput.current.value });\n  }\n\n\n  React.useEffect(()=>{\n    \n    avatarInput.current.value=''\n  },[isOpen])\n\n\n  return (\n    <PopupWithForm\n      name=\"edit-avatar\"\n      title=\"Обновить аватар\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleAvatarSubmit}\n      btnText=\"Сохранить\"\n    >\n      <input\n        id=\"link-avatar\"\n        type=\"url\"\n        name=\"link\"\n        ref={avatarInput}\n        placeholder=\"Ссылка на аватар\"\n        className=\"popup__input popup__input_type_link-avatar\"\n        required\n      />\n      <span className=\"link-avatar-error popup__input-error\"></span>\n    </PopupWithForm>\n  );\n}\n\nexport default EditAvatarPopup;\n","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nfunction AddPlacesPopup({ isOpen, onClose, onAddPlace }) {\n  const nameOfPlace = React.useRef();\n  const linkToPlace = React.useRef();\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onAddPlace({\n      name: nameOfPlace.current.value,\n      link: linkToPlace.current.value,\n    });\n  }\n\n  React.useEffect(()=>{\n    \n    nameOfPlace.current.value= ''\n    linkToPlace.current.value= ''\n  },[isOpen])\n\n  return (\n    <PopupWithForm\n      name=\"add-cards\"\n      title=\"Новое место\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n      btnText=\"Сохранить\"\n    >\n      <input\n        id=\"edit-form\"\n        type=\"text\"\n        name=\"name\"\n        placeholder=\"Название\"\n        minLength=\"2\"\n        maxLength=\"30\"\n        className=\" popup__input popup__input_type_name-card\"\n        required\n        ref={nameOfPlace}\n      />\n      <span className=\" edit-form-error popup__input-error\"></span>\n      <input\n        id=\"link\"\n        type=\"url\"\n        name=\"link\"\n        placeholder=\"Ссылка на страницу\"\n        className=\"popup__input popup__input_type_link-card\"\n        required\n        ref={linkToPlace}\n      />\n      <span className=\"link-error popup__input-error\"></span>\n    </PopupWithForm>\n  );\n}\n\nexport default AddPlacesPopup;\n","function ImagePopup({ card, isOpen, onClose }) {\n  return (\n    <div className={`popup popup-of-places  ${isOpen && \"popup_active\"}`}>\n      <div className=\"popup-of-places__container\">\n        <img className=\"popup-of-places__img\" src={card.link} alt={card.name} />\n        <p className=\"popup-of-places__name\">{card.name}</p>\n        <button className=\"popup__close\" onClick={onClose}></button>\n      </div>\n    </div>\n  );\n}\n\nexport default ImagePopup;\n","class Api {\n  constructor({ address, headers }) {\n    this._address = address;\n    this._headers = headers;\n  }\n\n  getOriginsCards() {\n    return fetch(`${this._address}/cards`, {\n      headers: this._headers,\n    }).then(this._checkResponse);\n  }\n\n  getUserInfo() {\n    return fetch(`${this._address}/users/me`, {\n      headers: this._headers,\n    }).then(this._checkResponse);\n  }\n\n  postUserInfo(name, about) {\n    console.log(name);\n    return fetch(`${this._address}/users/me`, {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify({\n        name: name,\n        about: about,\n      }),\n    }).then(this._checkResponse);\n  }\n\n  addNewCard(name, link) {\n    return fetch(`${this._address}/cards`, {\n      method: \"POST\",\n      headers: this._headers,\n      body: JSON.stringify({\n        name: name,\n        link: link,\n      }),\n    }).then(this._checkResponse);\n  }\n\n  editUserAvatar(url) {\n    return fetch(`${this._address}/users/me/avatar`, {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify({\n        avatar: url,\n      }),\n    }).then(this._checkResponse);\n  }\n\n  removeCard(cardId) {\n    return fetch(`${this._address}/cards/${cardId}`, {\n      method: \"DELETE\",\n      headers: this._headers,\n    }).then(this._checkResponse);\n  }\n\n  dislikeCard(id) {\n    return fetch(`${this._address}/cards/${id}/likes`, {\n      method: \"DELETE\",\n      headers: this._headers,\n    }).then(this._checkResponse);\n  }\n\n  changeLikeCardStatus(id, isLiked) {\n    if (isLiked) {\n      return this.dislikeCard(id);\n    } else {\n      return this.likeCard(id);\n    }\n  }\n\n  likeCard(id) {\n    return fetch(`${this._address}/cards/${id}/likes`, {\n      method: \"PUT\",\n      headers: this._headers,\n    }).then(this._checkResponse);\n  }\n\n  _checkResponse(res) {\n    if (!res.ok) {\n      return Promise.reject(`Ошибка ${res.status}`);\n    }\n\n    return res.json();\n  }\n\n  updateHeaders() {\n    this._headers = {\n      \"Content-Type\": \"application/json\",\n      Authorization: `Bearer ${localStorage.getItem(\"jwt\")}`,\n    };\n  }\n}\n\nconst api = new Api({\n  address: \"http://api.konstantinnovikov.nomoredomains.xyz\",\n  headers: {\n    authorization: `Bearer ${localStorage.getItem(\"jwt\")}`,\n    \"Content-type\": \"application/json\",\n  },\n});\n\nexport default api;\n","export default __webpack_public_path__ + \"static/media/authorization-ok.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/authorization-bad.df8eddf6.svg\";","import React from 'react';\n\n\nfunction Login({authorization}) {\n    \n    const [valueEmail, setValueEmail] = React.useState('')\n    const [valuePassword, setValuePassword] = React.useState('')\n\n    function handleChangeEmail(evt) {\n        setValueEmail(evt.target.value)\n    }\n\n    function handleChangePassword(evt) {\n        setValuePassword(evt.target.value)\n    }\n\n    function handleSubmit(evt) {\n        evt.preventDefault()\n        const email = valueEmail;\n        const password = valuePassword;\n\n        authorization({email, password})\n    }\n\n\n    return (\n        <section className=\"start-screen\">\n            <h1 className=\"start-screen__title\">Вход</h1>\n            <form onSubmit={handleSubmit} className=\"start-screen__form\">\n                <input value={valueEmail} className=\"start-screen__input\" placeholder=\"Email\"\n                       onChange={handleChangeEmail}/>\n                <input value={valuePassword} className=\"start-screen__input\" placeholder=\"Пароль\"\n                       onChange={handleChangePassword}/>\n                <button className=\"start-screen__submit\">Войти</button>\n            </form>\n        </section>\n    );\n}\n\nexport default Login;","import React from 'react';\nimport {Link} from \"react-router-dom\";\n\n\nfunction Register({registration}) {\n\n    const [valueEmail, setValueEmail] = React.useState('')\n    const [valuePassword, setValuePassword] = React.useState('')\n\n    function handleChangeEmail(evt) {\n        setValueEmail(evt.target.value)\n    }\n\n    function handleChangePassword(evt) {\n        setValuePassword(evt.target.value)\n    }\n\n    function handleSubmit(evt) {\n        evt.preventDefault()\n        const email = valueEmail;\n        const password = valuePassword;\n\n        registration({email,password})\n    }\n\n    return (\n        <section className=\"start-screen\">\n            <h1 className=\"start-screen__title\">Регистрация</h1>\n            <form onSubmit={handleSubmit} className=\"start-screen__form\">\n                <input value={valueEmail} onChange={handleChangeEmail} type=\"email\" className=\"start-screen__input\"\n                       placeholder=\"Email\"/>\n                <input value={valuePassword} onChange={handleChangePassword} type=\"password\"\n                       className=\"start-screen__input\" placeholder=\"Пароль\"/>\n                <button className=\"start-screen__submit\">Зарегестрироваться</button>\n            </form>\n            <Link className=\"start-screen__login\" to=\"/sign-in\"> Уже зарегестрированы? Войти</Link>\n        </section>\n    );\n}\n\nexport default Register;","import React from 'react';\nimport {Redirect, Route} from \"react-router-dom\";\n\n\nconst ProtectedRoute = ({component: Component, ...props}) => {\n    return (\n        <Route>\n            {() =>\n                props.loggedIn ? <Component {...props} /> : <Redirect to=\"/sign-in\"/>\n            }\n        </Route>\n    )\n}\n\nexport default ProtectedRoute;","import React from 'react';\n\n\nfunction InfoTooltip({onClose, isOpen, message}) {\n    return (\n        <div className={`popup popup_type_infotool ${isOpen ? 'popup_active' : ''}`}>\n            <div className=\"popup__container\">\n                <img src={message.iconPath} alt=\"Картинка Yes или No\" className=\"popup__result-icon\"/>\n                <p className=\"popup__title-info\">{message.text}</p>\n                <button type=\"button\" className=\"popup__close\" onClick={onClose}/>\n            </div>\n        </div>\n    );\n}\n\nexport default InfoTooltip;","import { toContainElement } from '@testing-library/jest-dom/dist/matchers';\n\nimport api from './Api'\n\nexport const BASE_URL = 'http://api.konstantinnovikov.nomoredomains.xyz';\n\n//const checkResponse = (response) => response.ok ? response.json() : Promise.reject(`Ошибка: ${response.status}`)\n\nconst checkResponse = (res) => {\n    if (!res.ok) {\n        return Promise.reject(`Ошибка: ${res.status}`);\n    }\n    return res.json();\n}\n\nexport const register = (email, password) => {\n    return fetch(`${BASE_URL}/signup`, {\n        method: 'POST',\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({email, password})\n    })\n};\n\nexport const authorize = ({email, password}) => {\n    return fetch(`${BASE_URL}/signin`, {\n        method: 'POST',\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({email, password})\n    }).then(checkResponse)\n        .then((data) => {\n            if (data.token) {\n                localStorage.setItem('jwt', data.token);\n                api.updateHeaders()\n                return data.token\n            }\n        })\n};\n\nexport const getContent = (token) => {\n    console.log(token)\n    return fetch(`${BASE_URL}/users/me`, {\n        method: 'GET',\n        headers: {\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}`,\n        },\n    })\n        .then(checkResponse)\n        .then((data) => data)\n}","import React from \"react\";\nimport Footer from \"./Footer\";\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacesPopup from \"./AddPlacesPopup\";\nimport ImagePopup from \"./ImagePopup\";\nimport api from \"../utils/Api\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport { Route, Switch, Redirect, useHistory } from \"react-router-dom\";\nimport registrationOk from \"../images/authorization-ok.svg\";\nimport registrationWrong from \"../images/authorization-bad.svg\";\nimport Login from \"./Login\";\nimport Register from \"./Register\";\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport InfoTooltip from \"./InfoTooltip\";\nimport * as auth from \"../utils/auth\";\n\nfunction App() {\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] =\n    React.useState(false);\n\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] =\n    React.useState(false);\n\n  const [isPlacesPopupOpen, setIsPlacesPopupOpen] = React.useState(false);\n\n  const [isTooltipOpen, setIsTooltipOpen] = React.useState(false);\n\n  const [selectedCard, setSelectedCard] = React.useState({});\n\n  const [currentUser, setCurrentUser] = React.useState({});\n\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [message, setMessage] = React.useState({ iconPath: \"\", text: \"\" });\n  const [email, setEmail] = React.useState(\"\");\n  const history = useHistory();\n\n  const [cards, setCards] = React.useState([]);\n\n  React.useEffect(() => {\n    if (loggedIn) {\n      api\n        .getOriginsCards()\n\n        .then((cards) => {\n          setCards(cards);\n        })\n        .catch((er) => {\n          console.log(er);\n        });\n    }\n  }, [loggedIn]);\n\n  React.useEffect(() => {\n    const jwt = localStorage.getItem(\"jwt\");\n    if (jwt) {\n      auth\n        .getContent(jwt)\n        .then((res) => {\n          setLoggedIn(true);\n          setEmail(res.email);\n          history.push(\"/\");\n        })\n        .catch((err) => console.log(err));\n    }\n  }, [history]);\n\n  React.useEffect(() => {\n    if (loggedIn) {\n      api\n        .getUserInfo()\n        .then((userInfo) => {\n          setCurrentUser(userInfo);\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    }\n  }, [loggedIn]);\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some((i) => i === currentUser._id);\n    console.log(isLiked);\n    api\n      .changeLikeCardStatus(card._id, isLiked)\n      .then((newCard) => {\n        setCards((state) =>\n          state.map((c) => (c._id === card._id ? newCard : c))\n        );\n      })\n      .catch((er) => {\n        console.log(er);\n      });\n    api.getUserInfo().then((user) => {\n      console.log(user);\n    });\n  }\n\n  function updateUserInfo({ name, about }) {\n    api\n      .postUserInfo(name, about)\n      .then((data) => {\n        setCurrentUser(data);\n        closeAllPopups();\n      })\n      .catch((er) => {\n        console.log(er);\n      });\n  }\n\n  function updateUserAvatar({ avatar }) {\n    api\n      .editUserAvatar(avatar)\n      .then((data) => {\n        setCurrentUser(data);\n        closeAllPopups();\n      })\n      .catch((er) => {\n        console.log(er);\n      });\n  }\n\n  function handleCardDelete(card) {\n    api\n      .removeCard(card._id)\n      .then(() => {\n        const newCards = cards.filter((el) => el !== card);\n        setCards(newCards);\n      })\n      .catch((er) => {\n        console.log(er);\n      });\n  }\n\n  function handleAddPlaceSubmit({ name, link }) {\n    api\n      .addNewCard(name, link)\n      .then((data) => {\n        setCards([data, ...cards]);\n        closeAllPopups();\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function closeAllPopups() {\n    setIsAddPlacePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsPlacesPopupOpen(false);\n    setSelectedCard({});\n    setIsTooltipOpen(false);\n  }\n\n  function handleInfoTooltipOpen() {\n    setIsTooltipOpen(true);\n  }\n\n  function handleInfoTooltipContent({ iconPath, text }) {\n    setMessage({ iconPath: iconPath, text: text });\n  }\n\n  function handleSignOut() {\n    setLoggedIn(false);\n    localStorage.removeItem(\"jwt\");\n    setEmail(\"\");\n    history.push(\"/sign-in\");\n  }\n\n  function registration({ email, password }) {\n    auth\n      .register(email, password)\n      .then((res) => {\n        if (res.status === 201 || res.status === 200) {\n          console.log(\"111111111\");\n          handleInfoTooltipContent({\n            iconPath: registrationOk,\n            text: \"Вы успешно зарегестрировались!\",\n          });\n          handleInfoTooltipOpen();\n          setTimeout(history.push, 3000, \"/sign-in\");\n          setTimeout(closeAllPopups, 2500);\n        }\n        if (res.status === 409) {\n          console.log(\"Введеный email уже зарегестрирован!\");\n          handleInfoTooltipContent({\n            iconPath: registrationWrong,\n            text: \"Введеный email уже зарегестрирован!\",\n          });\n          handleInfoTooltipOpen();\n          setTimeout(closeAllPopups, 2500);\n        }\n      })\n      .catch((err) => {\n        handleInfoTooltipContent({\n          iconPath: registrationWrong,\n          text: \"Что-то пошло не так! Попробуйте еще раз!\",\n        });\n        handleInfoTooltipOpen();\n        setTimeout(closeAllPopups, 2500);\n        console.log(err);\n      });\n  }\n\n  function authorization({ email, password }) {\n    auth\n      .authorize({ email, password })\n      .then((data) => {\n        if (!data) {\n          throw new Error(\"Произошла ошибка\");\n        }\n        console.log(1111111)\n        setEmail(email);\n        setLoggedIn(true);\n        handleInfoTooltipContent({\n          iconPath: registrationOk,\n          text: \"Вы успешны авторизованы!\",\n        });\n        handleInfoTooltipOpen();\n        setTimeout(history.push, 3000, \"/\");\n        setTimeout(closeAllPopups, 2500);\n      })\n      .catch((err) => {\n        handleInfoTooltipContent({\n          iconPath: registrationWrong,\n          text: \"Что-то пошло не так! Попробуйте еще раз!\",\n        });\n        handleInfoTooltipOpen();\n        setTimeout(closeAllPopups, 2500);\n        console.log(err);\n      });\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard(card);\n    setIsPlacesPopupOpen(true);\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <Header loggedIn={loggedIn} email={email} handleSignOut={handleSignOut} />\n      <Switch>\n        <Route path=\"/sign-in\">\n          <Login authorization={authorization} />\n        </Route>\n        <Route path=\"/sign-up\">\n          <Register registration={registration} />\n        </Route>\n        <ProtectedRoute\n          exact\n          path=\"/\"\n          component={Main}\n          onEditProfile={handleEditProfileClick}\n          onAddPlace={handleAddPlaceClick}\n          onEditAvatar={handleEditAvatarClick}\n          onCardClick={handleCardClick}\n          onCardLike={handleCardLike}\n          cards={cards}\n          onCardDelete={handleCardDelete}\n          loggedIn={loggedIn}\n        ></ProtectedRoute>\n\n        <Route path=\"/\">\n          {loggedIn ? <Redirect to=\"/main\" /> : <Redirect to=\"/sign-in\" />}\n        </Route>\n      </Switch>\n      <Footer />\n      <EditProfilePopup\n        isOpen={isEditProfilePopupOpen}\n        onClose={closeAllPopups}\n        onChangeUserInfo={updateUserInfo}\n      />\n      <EditAvatarPopup\n        isOpen={isEditAvatarPopupOpen}\n        onClose={closeAllPopups}\n        onEditAvatar={updateUserAvatar}\n      />\n\n      <AddPlacesPopup\n        isOpen={isAddPlacePopupOpen}\n        onClose={closeAllPopups}\n        onAddPlace={handleAddPlaceSubmit}\n      />\n      {/* на потом))) */}\n      {/* <PopupWithForm name=\"confirm-delete\" title=\"Вы уверены?\" btnText=\"Да\" /> */}\n\n      <ImagePopup\n        card={selectedCard}\n        isOpen={isPlacesPopupOpen}\n        onClose={closeAllPopups}\n      />\n      <InfoTooltip\n        isOpen={isTooltipOpen}\n        onClose={closeAllPopups}\n        message={message}\n      />\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./components/App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { BrowserRouter } from \"react-router-dom\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}